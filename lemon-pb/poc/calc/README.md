# PoC: Calculator

Proof of Concept adaptation of how the Calculator C example should look like if it had been designed in PureBasic and generated via a working Lemon PB parser generator.

These files were taken from [Serghei Iakovlev]'s Calculator example, found [`../../../lemon/examples/calc/`][calc/].

-----

**Table of Contents**

<!-- MarkdownTOC autolink="true" bracket="round" autoanchor="false" lowercase="only_ascii" uri_encoding="true" levels="1,2,3" -->

- [Folder Contents](#folder-contents)
- [PoC Status](#poc-status)

<!-- /MarkdownTOC -->

-----

# Folder Contents

Manually coded project files (non generated):

- [`calc.pb`][calc.pb] — PB adaptation of [`main.c`][main.c] (__WIP__).
- [`calc.y`][calc.y] — Calculator grammar (_unchanged_).
- [`calc_test-yyTables.pbi`][calc_test-yyTables.pbi] — custom tests to check data integrity (debug mode only).

Files that would be generated by Lemon PB:

- [`calc.pbi`][calc.pbi] — PoC generated parser (__WIP__).
- [`calc.out`][calc.out] — report on the states used by the parser automaton (_unchanged_).
- [`calc.h`][calc.h] — header file (_unchanged_).

# PoC Status

The PureBasic code is still WIP, far from being ready, but the little that was ported can be actually tested by running it — i.e. raw C code has been excluded from compilation via compiler directives.

Right now, I'm focusing on the strategy to store the parse tables data in a way that is both easy to integrate into the `lempar.pb` template and the way Lemon injects code into it, as well as trying to make them efficient and ensure they won't break when unsigned int (u32) data enters the scene.

Some required constants have been temporarily filled in manually (e.g. arrays sizes), but eventually we'll have to ensure that these are injected by LemonPB.

<!-----------------------------------------------------------------------------
                               REFERENCE LINKS
------------------------------------------------------------------------------>

<!-- folder files -->

[calc.h]: ./calc.h
[calc.out]: ./calc.out
[calc.pb]: ./calc.pb
[calc.pbi]: ./calc.pbi
[calc_test-yyTables.pbi]: ./calc_test-yyTables.pbi
[calc.y]: ./calc.y

<!-- calc files folders -->

[calc/]: ../../../lemon/examples/calc/ "View original Calc example files"
[main.c]: ../../../lemon/examples/calc/main.c "View original 'main.c' file"

<!-- people -->

[Serghei Iakovlev]: https://github.com/sergeyklay "View Serghei Iakovlev's GitHub profile"

<!-- EOF -->
